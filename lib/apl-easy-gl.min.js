!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("gl-matrix"));else if("function"==typeof define&&define.amd)define(["gl-matrix"],t);else{var r="object"==typeof exports?t(require("gl-matrix")):t(e["gl-matrix"]);for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(this,function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=25)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadFile=function(e){return new Promise(function(t,r){var n=new XMLHttpRequest;n.open("GET",e),n.overrideMimeType("text/plain"),n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&200===n.status&&t(n.responseText)},n.send()})}},function(t,r){t.exports=e},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a={minFilter:WebGLRenderingContext.LINEAR,magFilter:WebGLRenderingContext.LINEAR,wrapS:WebGLRenderingContext.CLAMP_TO_EDGE,wrapT:WebGLRenderingContext.CLAMP_TO_EDGE,flipY:!1,level:0,internalFormat:WebGLRenderingContext.RGBA,border:0,srcFormat:WebGLRenderingContext.RGBA,srcType:WebGLRenderingContext.UNSIGNED_BYTE,width:0,height:0};t.createTexture=function(e,t){t=n({},a,t);var r=e.createTexture();return e.bindTexture(e.TEXTURE_2D,r),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,t.wrapS),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,t.wrapT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.minFilter),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t.magFilter),e.texImage2D(e.TEXTURE_2D,t.level,t.internalFormat,t.width,t.height,t.border,t.srcFormat,t.srcType,null),r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.xmlToJSON=function e(t){if(t.hasChildNodes()){if(1===t.childNodes.length&&t.childNodes.item(0).nodeType===Node.TEXT_NODE){for(var r={},n=0;n<t.childNodes.length;n++)r[(l=t.childNodes.item(n)).nodeName]=l.nodeValue;return r}for(var a=[],o=0;o<t.childNodes.length;o++)(l=t.childNodes.item(o)).nodeType===Node.ELEMENT_NODE&&a.push(l);for(var i=!0,c=a[0].nodeName,u=1;u<a.length;u++)if((l=a[u]).nodeName!==c){i=!1;break}if(t.childNodes.length>1&&i){for(var s=[],f=0;f<a.length;f++){var l=a[f];s.push(e(l))}return s}var d={};for(f=0;f<a.length;f++){var v=(l=a[f]).nodeName;v in d?(Array.isArray(d[v].push)||(d[v]=[d[v]]),d[v].push(e(l))):d[v]=e(l)}return d}if(t.nodeType===Node.ELEMENT_NODE){d={};for(var p=0;p<t.attributes.length;p++){var m=t.attributes.item(p);d[m.nodeName]=m.nodeValue}return d}return t.nodeValue}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPowerOf2=function(e){return 0==(e&e-1)}},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=r(4),o={minFilter:WebGLRenderingContext.LINEAR_MIPMAP_LINEAR,magFilter:WebGLRenderingContext.LINEAR,wrapS:WebGLRenderingContext.CLAMP_TO_EDGE,wrapT:WebGLRenderingContext.CLAMP_TO_EDGE,flipY:!1,anisotropy:16,width:0,height:0};t.generateMipmap=function(e,t,r){if(r=n({},o,r),e.bindTexture(e.TEXTURE_2D,t),a.isPowerOf2(r.width)&&a.isPowerOf2(r.height)){if(e.generateMipmap(e.TEXTURE_2D),r.anisotropy){var i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");if(i){var c=Math.min(r.anisotropy,e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));e.texParameterf(e.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,c)}}}else switch(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),r.minFilter){case e.NEAREST_MIPMAP_NEAREST:case e.LINEAR_MIPMAP_NEAREST:e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST);break;case e.NEAREST_MIPMAP_LINEAR:case e.LINEAR_MIPMAP_LINEAR:e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR)}return t}},function(e,t,r){"use strict";function n(e,t,r){var n=e.createShader(t);if(e.shaderSource(n,r),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS)&&!e.isContextLost()){var a=1,o=r.split("\n").reduce(function(e,t){return e+"\n"+a+++". "+t},"");throw new Error(e.getShaderInfoLog(n)+o)}return n}function a(e,t,r){var n=e.getAttribLocation(t,r.name);return{set:function(t){e.bindBuffer(e.ARRAY_BUFFER,t.buffer),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,t.itemSize,t.type,!1,0,0)}}}function o(e,t,r,n){var a=function(e,t,r){switch(t){case e.FLOAT:return r>1?e.uniform1fv:e.uniform1f;case e.FLOAT_VEC2:return e.uniform2fv;case e.FLOAT_VEC3:return e.uniform3fv;case e.FLOAT_VEC4:return e.uniform4fv;case e.FLOAT_MAT2:return function(t,r,n){return e.uniformMatrix2fv(t,n,r)};case e.FLOAT_MAT3:return function(t,r,n){return e.uniformMatrix3fv(t,n,r)};case e.FLOAT_MAT4:return function(t,r,n){return e.uniformMatrix4fv(t,n,r)};default:case e.INT:return r>1?e.uniform1iv:e.uniform1i;case e.INT_VEC2:return e.uniform2iv;case e.INT_VEC3:return e.uniform3iv;case e.INT_VEC4:return e.uniform4fv}}(e,r.type,r.size),o=e.getUniformLocation(t,r.name);return{set:r.type===e.SAMPLER_2D?function(t){e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,t),e.uniform1i(o,n)}:function(e){return a(o,e)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.createProgram=function(e,t,r){var i=n(e,e.VERTEX_SHADER,t),c=n(e,e.FRAGMENT_SHADER,r),u=e.createProgram();if(e.attachShader(u,i),e.attachShader(u,c),e.linkProgram(u),!e.getProgramParameter(u,e.LINK_STATUS)&&!e.isContextLost())throw new Error("Could not initialise shaders: "+e.getProgramInfoLog(u));e.useProgram(u);for(var s=e.getProgramParameter(u,e.ACTIVE_UNIFORMS),f=e.getProgramParameter(u,e.ACTIVE_ATTRIBUTES),l={},d={},v=0,p=0;p<s;p++){var m=e.getActiveUniform(u,p);d[m.name]=o(e,u,m,v),m.type===e.SAMPLER_2D&&v++}for(p=0;p<f;p++){var h=e.getActiveAttrib(u,p);l[h.name]=a(e,u,h)}return{program:u,uniforms:d,attributes:l,setUniforms:function(e){for(var t in e)t in d&&d[t].set(e[t])},setAttributes:function(e){for(var t in e)t in l&&l[t].set(e[t])}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dirname=function(e){return e.match(/.*\//)[0].toString()}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(a,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function c(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new r(function(t){t(e.value)}).then(i,c)}u((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),i=r(0),c={newmtl:/\bnewmtl\s+(.*)\b/,ambient:/\bKa\s+([^\s]+)\s+([^\s]+)\s+([^\s]+)\b/,diffuse:/\bKd\s+([^\s]+)\s+([^\s]+)\s+([^\s]+)\b/,specular:/\bKs\s+([^\s]+)\s+([^\s]+)\s+([^\s]+)\b/,intensity:/\bNs\s+([^\s]+)\b/,transparent:/\bd\s+([^\s]+)\b/,illumination:/\billum\s+([^\s]+)\b/,ambientMap:/\bmap_Ka\s+([^\s]+)\b/,diffuseMap:/\bmap_Kd\s+([^\s]+)\b/,specularMap:/\bmap_Ks\s+([^\s]+)\b/,intensityMap:/\bmap_Ns\s+([^\s]+)\b/,alphaMap:/\bmap_d\s+([^\s]+)\b/,bumpMap:/\bmap_bump\s+([^\s]+)\b/};t.loadMtl=function(e){return n(this,void 0,void 0,function(){var t,r,n,u;return a(this,function(a){switch(a.label){case 0:return[4,i.loadFile(e)];case 1:return t=a.sent(),r=t.split("\n"),n={},u={},r.forEach(function(e){var t=e.match(c.newmtl);if(t)return u={name:t[1]},void(n[u.name]=u);["ambient","diffuse","specular"].forEach(function(t){!function(e,t,r,n){var a=e.match(t);a&&(r[n]=o.vec3.fromValues(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3])))}(e,c[t],u,t)}),["intensity","transparent","illumination","ambientMap","diffuseMap","specularMap","intensityMap","alphaMap","bumpMap"].forEach(function(t){!function(e,t,r,n){var a=e.match(t);a&&(r[n]=a[1])}(e,c[t],u,t)})}),[2,n]}})})}},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),o={width:0,height:0,depth:!0,stencil:!1,minFilter:WebGLRenderingContext.NEAREST,magFilter:WebGLRenderingContext.NEAREST,wrapS:WebGLRenderingContext.CLAMP_TO_EDGE,wrapT:WebGLRenderingContext.CLAMP_TO_EDGE};t.createFramebuffer=function(e,t){t=n({},o,t);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r);var i,c=a.createTexture(e,t);if(e.bindTexture(e.TEXTURE_2D,c),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,c,0),t.stencil||t.depth){var u=t.stencil?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.getExtension("WEBGL_depth_texture")&&(i=a.createTexture(e,{width:t.width,height:t.height,internalFormat:t.stencil?e.DEPTH_STENCIL:e.DEPTH_COMPONENT,srcFormat:t.stencil?e.DEPTH_STENCIL:e.DEPTH_COMPONENT,srcType:e.UNSIGNED_INT,minFilter:e.NEAREST,magFilter:e.NEAREST,wrapS:e.CLAMP_TO_EDGE,wrapT:e.CLAMP_TO_EDGE}),e.bindTexture(e.TEXTURE_2D,i),e.framebufferTexture2D(e.FRAMEBUFFER,u,e.TEXTURE_2D,c,0));var s=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,s),e.renderbufferStorage(e.RENDERBUFFER,t.stencil?e.DEPTH_STENCIL:e.DEPTH_COMPONENT16,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,u,e.RENDERBUFFER,s)}return{width:t.width,height:t.height,framebuffer:r,texture:c,depthStencilTexture:i}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createElementBuffer=function(e,t,r,n){var a=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,n||e.STATIC_DRAW);var o=t.length/r;return{buffer:a,itemSize:r,numItems:o,draw:function(t,r){e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a),e.drawElements(t||e.TRIANGLES,o,r||e.UNSIGNED_SHORT,0)}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createContext=function(e,t,r){var n,a=window.devicePixelRatio||1,o=function(){e.width=a*e.clientWidth,e.height=a*e.clientHeight};try{n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),r&&r.forEach(function(e){n.getSupportedExtensions().indexOf(name)&&n.getExtension(e)||console.log("Could not enable extension: "+e)}),o(),window.addEventListener("resize",o)}catch(e){}if(!n)throw new Error("Could not initialise WebGL");return n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createBuffer=function(e,t,r,n){var a=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,t,n||e.STATIC_DRAW),{type:function(e){switch(e){case"Int8Array":return WebGLRenderingContext.BYTE;case"Int16Array":return WebGLRenderingContext.SHORT;case"Uint8Array":return WebGLRenderingContext.UNSIGNED_BYTE;case"Uint16Array":return WebGLRenderingContext.UNSIGNED_SHORT;case"Float32Array":default:return WebGLRenderingContext.FLOAT}}(t.constructor.name),buffer:a,itemSize:r,numItems:t.length/r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeObjBuffers=function(e,t){if(!e)return t;var r=e.position.length/3;return{position:e.position.concat(t.position),coords:e.coords.concat(t.coords),indices:e.indices.concat(t.indices.map(function(e){return e+r}))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.framebufferToImage=function(e,t,r,n){var a=new Uint8Array(r*n*4);e.bindFramebuffer(e.FRAMEBUFFER,t),e.readPixels(0,0,r,n,e.RGBA,e.UNSIGNED_BYTE,a);var o=document.createElement("canvas");o.width=r,o.height=n;var i=o.getContext("2d"),c=i.createImageData(r,n);return c.data.set(a),i.putImageData(c,0,0),i.globalCompositeOperation="copy",i.scale(1,-1),i.translate(0,-n),i.drawImage(o,0,0),o.toDataURL("image/png")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertTrianglesToBufferArrays=function(e){var t=[],r=[],n=[],a=0;return e.forEach(function(e){var o=e.p1,i=e.p2,c=e.p3;t=t.concat([o[0],o[1],0,i[0],i[1],0,c[0],c[1],0]),r=e.curve?r.concat([-1,1,e.curve,0,-1,e.curve,1,1,e.curve]):r.concat([0,0,0,0,0,0,0,0,0]),n=n.concat([a,a+1,a+2]),a+=3}),{position:t,coords:r,indices:n}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.poseToMatrix=function(e,t){var r=t.orientation?t.orientation:[0,0,0,1],n=t.position?t.position:[0,0,0],a=r[0]+r[0],o=r[1]+r[1],i=r[2]+r[2],c=r[0]*a,u=r[0]*o,s=r[0]*i,f=r[1]*o,l=r[1]*i,d=r[2]*i,v=r[3]*a,p=r[3]*o,m=r[3]*i;return e[0]=1-(f+d),e[1]=u+m,e[2]=s-p,e[3]=0,e[4]=u-m,e[5]=1-(c+d),e[6]=l+v,e[7]=0,e[8]=s+p,e[9]=l-v,e[10]=1-(c+f),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3);t.loadXML=function(e){return new Promise(function(t,r){var a=new XMLHttpRequest;a.open("GET",e),a.overrideMimeType("text/xml"),a.onreadystatechange=function(){a.readyState===XMLHttpRequest.DONE&&200===a.status&&t(n.xmlToJSON(a.responseXML))},a.send()})}},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),o=r(5),i={level:0,internalFormat:WebGLRenderingContext.RGBA,border:0,srcFormat:WebGLRenderingContext.RGBA,srcType:WebGLRenderingContext.UNSIGNED_BYTE,mipmap:!1};t.loadTexture=function(e,t,r){r=n({},i,r);var c=new Image,u=a.createTexture(e,Object.assign({width:1,height:1},r)),s={texture:u,image:c,width:0,height:0};return c.onload=function(){s.width=c.width,s.height=c.height,e.bindTexture(e.TEXTURE_2D,u),e.texImage2D(e.TEXTURE_2D,r.level,r.internalFormat,r.srcFormat,r.srcType,c),r.mipmap&&o.generateMipmap(e,u,n({width:c.width,height:c.height},r))},c.src=t,s}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(a,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function c(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new r(function(t){t(e.value)}).then(i,c)}u((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),i=r(6);t.loadProgram=function(e,t,r){return n(this,void 0,void 0,function(){var n;return a(this,function(a){switch(a.label){case 0:return[4,Promise.all([o.loadFile(t),o.loadFile(r)])];case 1:return n=a.sent(),[2,i.createProgram(e,n[0],n[1])]}})})}},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(a,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function c(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new r(function(t){t(e.value)}).then(i,c)}u((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),c=r(7),u=r(1),s=r(8),f={group:/\bg\s+([^\s]+)\b/,vertex:/\bv\s+([^\s]+)\s+([^\s]+)\s+([^\s]+)\b/,texCoord:/\bvt\s+([^\s]+)\s+([^\s]+)\b/,normal:/\bvn\s+([^\s]+)\s+([^\s]+)\s+([^\s]+)\b/,triangle:/\bf\s+([^\s]+)\s+([^\s]+)\s+([^\s]+)\b/,mtllib:/\bmtllib\s+(.*)\b/,usemtl:/\busemtl\s+(.*)\b/},l=function(e){return parseInt(e,10)-1};t.loadObj=function(e){return a(this,void 0,void 0,function(){var t,r,d,v,p,m,h,E,b,_,T,g,y,w,x,R,M,A,P,L,O,N,F,S,C,I=this;return o(this,function(U){switch(U.label){case 0:return t=c.dirname(e),[4,i.loadFile(e)];case 1:return r=U.sent(),d=r.split("\n"),v=[],p=[],m=[],h={},E=[],b={indices:[]},_={},T={},d.forEach(function(e){return a(I,void 0,void 0,function(){var r,a,i,c,d,g,y,w,x,R,M,A,P,L,O;return o(this,function(o){switch(o.label){case 0:return(r=e.match(f.mtllib))?(a=t+r[1],i=[{},_],[4,s.loadMtl(a)]):[3,2];case 1:return _=n.apply(void 0,i.concat([o.sent()])),[2];case 2:if(r=e.match(f.usemtl))return b.material=r[1],[2];if(r=e.match(f.group))return c=r[1],b={name:c,indices:[]},h[c]=b,[2];if(r=e.match(f.vertex))return y=parseFloat(r[1]),w=parseFloat(r[2]),x=parseFloat(r[3]),E.push(u.vec3.fromValues(y,w,x)),[2];if(r=e.match(f.texCoord))return d=parseFloat(r[1]),g=parseFloat(r[2]),p.push(u.vec2.fromValues(d,g)),[2];if(r=e.match(f.normal))return y=parseFloat(r[1]),w=parseFloat(r[2]),x=parseFloat(r[3]),v.push(u.vec3.fromValues(y,w,x)),[2];if(r=e.match(f.triangle)){for(R=[],M=1,A=Math.min(4,r.length);M<A;M++)P=r[M].split("/").map(l),L=P.join("/"),O=void 0,L in T?O=T[L]:(O=m.push(P)-1,T[L]=O),R.push(O);return b.indices=b.indices.concat(R),[2]}return[2]}})})}),T=null,g=Number.MIN_VALUE,y=Number.MIN_VALUE,w=Number.MIN_VALUE,x=Number.MAX_VALUE,R=Number.MAX_VALUE,M=Number.MAX_VALUE,E.forEach(function(e){g=Math.max(g,e[0]),y=Math.max(y,e[1]),w=Math.max(w,e[2]),x=Math.min(x,e[0]),R=Math.min(R,e[1]),M=Math.min(M,e[2])}),O=(A=g-x)/2+x,N=(P=y-R)/2+R,F=(L=w-M)/2+M,E.forEach(function(e){e[0]-=O,e[1]-=N,e[2]-=F}),S=Math.max(A,Math.max(P,L)),C=1/S,E.forEach(function(e){e[0]*=C,e[1]*=C,e[2]*=C}),[2,{positions:E,normals:v,texCoords:p,vertices:m,groups:h,materials:_}]}})})}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(a,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function c(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new r(function(t){t(e.value)}).then(i,c)}u((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0);t.loadJSON=function(e){return n(this,void 0,void 0,function(){var t,r;return a(this,function(n){switch(n.label){case 0:return r=(t=JSON).parse,[4,o.loadFile(e)];case 1:return[2,r.apply(t,[n.sent()])]}})})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);t.orbitControls=function(e,t){var r=n.vec3.create(),a=n.vec3.fromValues(0,1,0),o=n.vec3.fromValues(0,0,0),i=Math.PI,c=n.vec2.create(),u=n.vec2.create(),s=n.vec2.create(),f=n.vec2.fromValues(t.clientWidth,t.clientHeight),l=n.vec3.create(),d=n.vec3.create(),v=n.vec3.create(),p=n.vec3.create(),m=n.mat4.create(),h=n.vec3.create(),E=n.vec3.create(),b=n.vec3.create(),_=function(e){window.addEventListener("mousemove",T),window.addEventListener("mouseup",g),n.vec2.set(c,e.pageX,e.pageY)},T=function(t){n.vec2.set(u,t.pageX,t.pageY),n.vec2.subtract(s,u,c),n.vec2.divide(s,s,f),n.vec2.scale(s,s,i),n.vec3.copy(l,r),n.vec3.copy(d,o),n.vec3.negate(v,r),n.vec3.cross(p,v,a),n.vec3.normalize(p,p),1===t.buttons?(n.mat4.identity(m),n.mat4.rotate(m,m,-s[0],a),n.mat4.rotate(m,m,-s[1],p),n.vec3.transformMat4(l,l,m)):2===t.buttons&&(n.vec3.copy(h,p),n.vec3.scale(h,h,1*-s[0]),n.vec3.copy(E,a),n.vec3.scale(E,E,1*s[1]),n.vec3.set(b,0,0,0),n.vec3.add(b,b,h),n.vec3.add(b,b,E),n.vec3.add(l,l,b),n.vec3.add(d,d,b)),n.mat4.lookAt(e,l,d,a)},g=function(){window.removeEventListener("mousemove",T),window.removeEventListener("mouseup",g),n.vec3.copy(r,l),n.vec3.copy(o,d)},y=function(t){n.vec3.scale(r,r,1+(t.deltaY>0?.1:-.1)),n.mat4.lookAt(e,r,o,a)},w=function(e){e.preventDefault()};return n.mat4.getTranslation(r,e),n.vec3.negate(r,r),t.addEventListener("mousedown",_),t.addEventListener("wheel",y),t.addEventListener("contextmenu",w,!1),function(){t.removeEventListener("mousedown",_),t.removeEventListener("wheel",y),t.removeEventListener("contextmenu",w),window.removeEventListener("mousemove",T),window.removeEventListener("mouseup",g)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);t.freenavControls=function(e,t){var r,a=n.vec3.create(),o=n.vec3.create(),i=n.vec3.create(),c=n.mat4.create(),u=n.vec3.create(),s=n.vec3.create(),f=n.vec3.create(),l={x:0,y:0},d={x:0,y:0},v=n.vec3.create(),p=[{keys:[87],action:function(e){b(),n.vec3.scale(v,i,5),n.vec3.add(e,e,v)}},{keys:[83],action:function(e){b(),n.vec3.scale(v,i,-5),n.vec3.add(e,e,v)}},{keys:[65],action:function(e){b(),n.vec3.scale(v,a,5),n.vec3.add(e,e,v)}},{keys:[68],action:function(e){b(),n.vec3.scale(v,a,-5),n.vec3.add(e,e,v)}},{keys:[32],action:function(e){b(),n.vec3.scale(v,o,-5),n.vec3.add(e,e,v)}},{keys:[17,67],action:function(e){b(),n.vec3.scale(v,o,5),n.vec3.add(e,e,v)}}],m={},h=[],E={},b=function(){n.vec3.set(a,e[0],e[4],e[8]),n.vec3.set(o,e[1],e[5],e[9]),n.vec3.set(i,e[2],e[6],e[10])},_=function(t){l.x=t.pageX,l.y=t.pageY,n.mat4.invert(c,e),n.vec3.set(u,c[12],c[13],c[14]),n.vec3.negate(s,u),window.addEventListener("mousemove",g),window.addEventListener("mouseup",y)},T=function(){r=requestAnimationFrame(T),h.length&&(n.vec3.set(f,0,0,0),h.forEach(function(e){e.action(f)}),n.vec3.subtract(u,u,f),n.vec3.negate(s,u),n.mat4.translate(e,e,f))},g=function(r){d.x=(r.pageX-l.x)/t.width,d.y=(r.pageY-l.y)/t.height,b(),n.mat4.translate(e,e,u),n.mat4.rotateY(e,e,d.x*Math.PI),b(),n.mat4.rotate(e,e,d.y*Math.PI,a),n.mat4.translate(e,e,s),l.x=r.pageX,l.y=r.pageY},y=function(){window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",y)},w=function(e){!E.hasOwnProperty(e.which)&&m.hasOwnProperty(e.which)&&h.indexOf(m[e.which])<0&&(E[e.which]=!0,h.push(m[e.which]))},x=function(e){if(E.hasOwnProperty(e.which)&&m.hasOwnProperty(e.which)){delete E[e.which];var t=m[e.which],r=h.indexOf(t);r>=0&&h.splice(r,1)}};return p.forEach(function(e){e.keys.forEach(function(t){m[t]=e})}),r=requestAnimationFrame(T),t.addEventListener("mousedown",_),window.addEventListener("keydown",w),window.addEventListener("keyup",x),function(){cancelAnimationFrame(r),t.removeEventListener("mousedown",_),window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",y),window.removeEventListener("keydown",w),window.removeEventListener("keyup",x)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRenderer=function(e,t){var r,n,a=0,o=window,i=function(e){r=o.requestAnimationFrame(i),n=e-a,a=e,t(n)};return{isPlaying:function(){return null!==r},stop:function(){o.cancelAnimationFrame(r),r=null},start:function(t){o=t||o,e(),r=o.requestAnimationFrame(i)}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(24);t.createRenderer=n.createRenderer;var a=r(23);t.freenavControls=a.freenavControls;var o=r(22);t.orbitControls=o.orbitControls;var i=r(0);t.loadFile=i.loadFile;var c=r(21);t.loadJSON=c.loadJSON;var u=r(8);t.loadMtl=u.loadMtl;var s=r(20);t.loadObj=s.loadObj;var f=r(19);t.loadProgram=f.loadProgram;var l=r(18);t.loadTexture=l.loadTexture;var d=r(17);t.loadXML=d.loadXML;var v=r(16);t.poseToMatrix=v.poseToMatrix;var p=r(15);t.convertTrianglesToBufferArrays=p.convertTrianglesToBufferArrays;var m=r(7);t.dirname=m.dirname;var h=r(14);t.framebufferToImage=h.framebufferToImage;var E=r(4);t.isPowerOf2=E.isPowerOf2;var b=r(13);t.mergeObjBuffers=b.mergeObjBuffers;var _=r(3);t.xmlToJSON=_.xmlToJSON;var T=r(12);t.createBuffer=T.createBuffer;var g=r(11);t.createContext=g.createContext;var y=r(10);t.createElementBuffer=y.createElementBuffer;var w=r(9);t.createFramebuffer=w.createFramebuffer;var x=r(6);t.createProgram=x.createProgram;var R=r(2);t.createTexture=R.createTexture;var M=r(5);t.generateMipmap=M.generateMipmap}])});